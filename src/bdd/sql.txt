create table ETABLISSEMENT
(
	ID BIGINT auto_increment,
	NOM VARCHAR_IGNORECASE,
	ADRESSE VARCHAR_IGNORECASE,
	CODE_POSTAL VARCHAR_IGNORECASE,
	VILLE VARCHAR_IGNORECASE,
	constraint ETABLISSEMENT_PK
		primary key (ID)
);

create table PATIENT
(
	ID BIGINT auto_increment,
	LOGIN VARCHAR_CASESENSITIVE,
	PASSWORD VARCHAR_IGNORECASE,
	NOM VARCHAR_IGNORECASE,
	PRENOM VARCHAR_IGNORECASE,
	TELEPHONE VARCHAR_IGNORECASE,
	constraint PATIENT_PK
		primary key (ID)
);

create unique index PATIENT_LOGIN_UINDEX
	on PATIENT (LOGIN);

create table MEDECIN
(
	ID BIGINT auto_increment,
	LOGIN VARCHAR_CASESENSITIVE,
	PASSWORD VARCHAR_IGNORECASE,
	NOM VARCHAR_IGNORECASE,
	PRENOM VARCHAR_IGNORECASE,
	TELEPHONE VARCHAR_IGNORECASE,
	SPECIALITE VARCHAR_IGNORECASE,
	ID_ETABLISSEMENT BIGINT,
	constraint MEDECIN_PK
		primary key (ID),
	constraint MEDECIN_ETABLISSEMENT_ID_FK
		foreign key (ID_ETABLISSEMENT) references ETABLISSEMENT (ID)
);

create unique index MEDECIN_LOGIN_UINDEX
	on MEDECIN (LOGIN);

create table RENDEZ_VOUS
(
	JOUR DATE not null,
	HEURE TIME not null,
	ID_MEDECIN BIGINT not null,
	ID_PATIENT BIGINT not null,
	constraint RENDEZ_VOUS_PK
		primary key (JOUR, HEURE, ID_MEDECIN, ID_PATIENT),
	constraint RENDEZ_VOUS_MEDECIN_ID_FK
		foreign key (ID_MEDECIN) references MEDECIN (ID),
	constraint RENDEZ_VOUS_PATIENT_ID_FK
		foreign key (ID_PATIENT) references PATIENT (ID)
);

